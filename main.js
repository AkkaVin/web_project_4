!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n((function t(n,o){var i,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"_toggleButtonState",(function(e){a._hasInvalidInput(a._inputs)?(e.classList.add(a._settings.inactiveButtonClass),e.disabled=!0):(e.classList.remove(a._settings.inactiveButtonClass),e.disabled=!1)})),r(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),r(this,"_checkInputValidity",(function(e){e.validity.valid?a._hideError(e):a._showError(e,e.validationMessage)})),r(this,"_showError",(function(e,t){e.classList.add(a._settings.inputErrorClass);var n=a._formElement.querySelector("#".concat(e.id,"-error"));n.textContent=t,n.classList.add(a._settings.errorClass)})),r(this,"_hideError",(function(e){e.classList.remove(a._settings.inputErrorClass);var t=a._formElement.querySelector("#".concat(e.id,"-error"));t.classList.remove(a._settings.errorClass),t.textContent=""})),r(this,"resetValidation",(function(){a._inputs.forEach((function(e){a._hideError(e)})),a._toggleButtonState(a._saveButton)})),r(this,"enableValidation",(function(){a._formElement.addEventListener("submit",(function(e){e.preventDefault()})),a._toggleButtonState(a._saveButton),a._inputs.forEach((function(e){e.addEventListener("input",(function(){a._checkInputValidity(e),a._toggleButtonState(a._saveButton)}))}))})),this._settings=n,this._formElement=o,this._inputs=function(t){if(Array.isArray(t))return e(t)}(i=this._formElement.querySelectorAll(this._settings.inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._saveButton=this._formElement.querySelector(this._settings.submitButtonSelector)}));function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n,r){var o,i,a=this,u=t.name,c=t.link,s=t._id,l=t.likes,f=t.owner,p=t.userId,d=r.handleCardClick,h=r.handleRemoveButtonClick,y=r.handleLikeButtonClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(){a._cardLikesCount.textContent=a._likes.length,a._isLiked()?a._cardLikeButton.classList.add("card__like-btn_active"):a._cardLikeButton.classList.remove("card__like-btn_active")},(o="_renderLikes")in this?Object.defineProperty(this,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[o]=i,this._name=u,this._link=c,this._alt=u,this._id=s,this._likes=l,this._ownerId=f._id,this._userId=p,this._cardTemplate=document.querySelector(n).content.querySelector(".card"),this._handleCardClick=d,this._handleRemoveButtonClick=h,this._handleLikeButtonClick=y}var t,n;return t=e,(n=[{key:"removeCard",value:function(){this._card.remove(),this._card=null}},{key:"_setEventListeners",value:function(){var e=this;this._cardRemoveButton.addEventListener("click",(function(){e._handleRemoveButtonClick(e)})),this._cardImage.addEventListener("click",this._handleCardClick),this._cardLikeButton.addEventListener("click",(function(t){return e._handleLikeButtonClick(e)}))}},{key:"setLikes",value:function(e){this._likes=e,this._renderLikes()}},{key:"createCardElement",value:function(){return this._getElement(),this._cardRemoveButton=this._card.querySelector(".card__remove-btn"),this._ownerId==this._userId&&this._cardRemoveButton.classList.add("card__remove-btn_visible"),this._cardLikeButton=this._card.querySelector(".card__like-btn"),this._cardImage=this._card.querySelector(".card__image"),this._cardTitle=this._card.querySelector(".card__title"),this._cardLikesCount=this._card.querySelector(".card__likes-count"),this._cardImage.src=this._link,this._cardImage.alt=this._alt,this._cardTitle.textContent=this._name,this._renderLikes(),this._setEventListeners(),this._card}},{key:"_getElement",value:function(){this._card=this._cardTemplate.cloneNode(!0)}},{key:"_isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){var n=t.userNameSelector,r=t.userJobSelector,o=t.userAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameElement=document.querySelector(n),this._userJobElement=document.querySelector(r),this._userAvatarElement=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._userNameElement.textContent,userJob:this._userJobElement.textContent,userAvatar:this._userAvatarElement.src}}},{key:"getUserId",value:function(){return this._userId}},{key:"setUserInfoTextContent",value:function(e){var t=e.userName,n=e.userJob;this._userNameElement.textContent=t,this._userJobElement.textContent=n}},{key:"setUserInfoAvatar",value:function(e){this._userAvatarElement.src=e}},{key:"initUserInfo",value:function(e){var t=e.userName,n=e.userJob,r=e.userAvatarSrc,o=e.userId;this.setUserInfoTextContent({userName:t,userJob:n}),this.setUserInfoAvatar(r),this._userId=o}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._elementContainer=document.querySelector(n)}var t,n;return t=e,(n=[{key:"_clearContainer",value:function(){this._elementContainer.innerHTML=""}},{key:"renderItems",value:function(e){var t=this;this._clearContainer(),this._items=e,this._items.forEach((function(e){t.addItem(e)}))}},{key:"addItem",value:function(e){var t=this._renderer(e);this._elementContainer.prepend(t)}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"_handleEscClose",(function(e){27===e.which&&n.close()})),p(this,"_handleOverlayPopupContent",(function(e){e.currentTarget===e.target&&n.close()})),this._popupElement=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleOverlayPopupContent)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleOverlayPopupContent)}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".popup__close-btn").addEventListener("click",(function(t){t.preventDefault(),e.close()}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=m(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_.apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function b(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupImage=t._popupElement.querySelector(".popup__image"),t._popupImageTitle=t._popupElement.querySelector(".popup__image-title"),t}return t=a,(n=[{key:"open",value:function(e){var t=e.text,n=e.src,r=e.alt;this._popupImage.src=n,this._popupImage.alt=r,this._popupImageTitle.textContent=t,_(g(a.prototype),"open",this).call(this)}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=C(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},S.apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function I(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._handleSubmit=t,n._popupForm=n._popupElement.querySelector(".form"),n._inputList=n._popupForm.querySelectorAll(".form__input"),n._submitButton=n._popupForm.querySelector(".form__save-btn"),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setButtonTextContent",value:function(e){this._submitButton.textContent=e}},{key:"setEventListeners",value:function(){var e=this;S(j(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(e._getInputValues())}))}},{key:"close",value:function(){S(j(a.prototype),"close",this).call(this),this._popupForm.reset()}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=A(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},B.apply(this,arguments)}function A(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function q(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return q(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupForm=t._popupElement.querySelector(".form"),t._submitButton=t._popupForm.querySelector(".form__save-btn"),t}return t=a,(n=[{key:"setAction",value:function(e){this._handleSubmit=e}},{key:"setEventListeners",value:function(){var e=this;B(R(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit()}))}},{key:"setButtonTextContent",value:function(e){this._submitButton.textContent=e}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d),F={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__save-btn",inactiveButtonClass:"form__save-btn_inactive",inputErrorClass:"form__input_invalid",errorClass:"form__error_active"},N=".popup_type_profile-edit",J=".popup_type_add-card",D=".popup_type_profile-avatar-edit";function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=new(function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_customFetch",value:function(e,t){return fetch(e,t).then((function(e){return e.ok?e.json():Promise.reject(e.status+" "+e.statusText)}))}},{key:"getInitialCards",value:function(){return this._customFetch("".concat(this._baseUrl,"/cards"),{headers:this._headers})}},{key:"getUserInfo",value:function(){return this._customFetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers})}},{key:"updateUserInfoTextContent",value:function(e){return this._customFetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify(e)})}},{key:"updateUserInfoAvatar",value:function(e){return this._customFetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify(e)})}},{key:"createCard",value:function(e){return this._customFetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)})}},{key:"deleteCard",value:function(e){return this._customFetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"})}},{key:"likeCard",value:function(e){return this._customFetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"})}},{key:"unlikeCard",value:function(e){return this._customFetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"})}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"61377b51-0560-4b73-a405-aecc1e0478a6","Content-Type":"application/json"}});function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Promise.all([M.getInitialCards(),M.getUserInfo()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ne.initUserInfo({userName:i.name,userJob:i.about,userAvatarSrc:i.avatar,userId:i._id}),o.forEach((function(e){e.userId=i._id})),re.renderItems(o)})).catch((function(e){return console.log(e)}));var $,z=document.querySelector(".profile__edit-btn"),Y=document.querySelector(".profile__add-card-btn"),G=document.querySelector(".profile__avatar-container"),K=document.querySelector(N),Q=document.querySelector(J),W=document.querySelector(D),X=K.querySelector(F.formSelector).getAttribute("name"),Z=Q.querySelector(F.formSelector).getAttribute("name"),ee=W.querySelector(F.formSelector).getAttribute("name"),te={};$=F,Array.from(document.querySelectorAll($.formSelector)).forEach((function(e){var t=new o($,e),n=e.getAttribute("name");te[n]=t,t.enableValidation()}));var ne=new c({userNameSelector:".profile__name",userJobSelector:".profile__job",userAvatarSelector:".profile__avatar"}),re=new l({items:[],renderer:function(e){return(t=e,new a(t,".card-template",{handleCardClick:function(){oe.open({text:t.name,src:t.link,alt:t.alt})},handleRemoveButtonClick:se,handleLikeButtonClick:function(e){var t=e._isLiked()?"unlikeCard":"likeCard";M[t](e._id).then((function(t){return e.setLikes(t.likes)})).catch((function(e){return console.log(e)}))}})).createCardElement();var t}},".cards__container"),oe=new k(".popup_type_image"),ie=new L(N,(function(e){ie.setButtonTextContent("Saving..."),M.updateUserInfoTextContent({name:e.name,about:e.job}).then((function(e){ne.setUserInfoTextContent({userName:e.name,userJob:e.about}),ie.close()})).catch((function(e){return console.log(e)})).finally((function(){ie.setButtonTextContent("Save")}))})),ae=new U(".popup_type_delete-card"),ue=new L(J,(function(e){ue.setButtonTextContent("Creating..."),M.createCard({name:e.cardTitle,link:e.url}).then((function(e){var t={name:e.name,link:e.link,alt:e.name,_id:e._id,ableToDelete:!0,likes:[],owner:{_id:ne.getUserId()},userId:ne.getUserId()};re.addItem(t),ue.close()})).catch((function(e){return console.log(e)})).finally((function(){ue.setButtonTextContent("Create")}))})),ce=new L(D,(function(e){ce.setButtonTextContent("Saving..."),M.updateUserInfoAvatar({avatar:e.url}).then((function(e){ne.setUserInfoAvatar(e.avatar),ce.close()})).catch((function(e){return console.log(e)})).finally((function(){ce.setButtonTextContent("Save")}))}));function se(e){ae.open(),ae.setAction((function(){ae.setButtonTextContent("Deleting..."),M.deleteCard(e._id).then((function(t){ae.close(),e.removeCard()})).catch((function(e){return console.log(e)})).finally((function(){ae.setButtonTextContent("Yes")}))}))}ie.setEventListeners(),oe.setEventListeners(),ue.setEventListeners(),ae.setEventListeners(),ce.setEventListeners(),z.addEventListener("click",(function(){var e;e=ne.getUserInfo(),ie.setInputValues({name:e.userName,job:e.userJob}),te[X].resetValidation(),ie.open()})),Y.addEventListener("click",(function(){te[Z].resetValidation(),ue.open()})),G.addEventListener("click",(function(){var e=ne.getUserInfo();ce.setInputValues({url:e.userAvatar}),te[ee].resetValidation(),ce.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T25ELEdBQVlILGNBQ3pCbUMsR0FBeUJvQixlQUFnQixDQUN2QyxLQUFRRCxFQUFLbEksU0FDYixJQUFPa0ksRUFBS2pJLFVBaENka0csR0FBZUosR0FBcUJxQyxrQkFFcENyQixHQUF5QkosVUFHM0JqQixFQUFjaEosaUJBQWlCLFNBQVMsV0FJdEN5SixHQUFlRixHQUFpQm1DLGtCQUVoQ2YsR0FBcUJWLFVBR3ZCaEIsRUFBdUJqSixpQkFBa0IsU0FBUyxXQUVoRCxJQUFNd0wsRUFBT25ELEdBQVlILGNBQ3pCZ0QsR0FBMEJPLGVBQWdCLENBQ3hDLElBQU9ELEVBQUtHLGFBR2RsQyxHQUFlRCxJQUEyQmtDLGtCQUUxQ1IsR0FBMEJqQixVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL3NldHRpbmdzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yIChzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRzID0gWy4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3NhdmVCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9IChidXR0b24pID0+IHtcblxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRzKSkge1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSBpbnB1dHMgPT5cbiAgICBpbnB1dHMuc29tZSAoaW5wdXQgPT5cbiAgICAgICFpbnB1dC52YWxpZGl0eS52YWxpZClcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0KSA9PiB7XG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0LCBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dCk7XG4gICAgfVxuICB9XG5cbiAgX3Nob3dFcnJvciA9IChpbnB1dCwgZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9oaWRlRXJyb3IgPSAoaW5wdXQpID0+IHtcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYClcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9O1xuXG5cbiAgcmVzZXRWYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoICggaW5wdXQgPT4ge1xuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0KTtcbiAgICB9KVxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX3NhdmVCdXR0b24pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSlcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9zYXZlQnV0dG9uKTtcblxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKCBpbnB1dCA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsKCkgPT57XG4gICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcbiAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9zYXZlQnV0dG9uKTtcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxufVxuXG4iLCJcbmV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IgKFxuICAgIHsgLy8gaW5wdXQgZGF0YVxuICAgICAgbmFtZSxcbiAgICAgIGxpbmssXG4gICAgICBfaWQsXG4gICAgICAgbGlrZXMsXG4gICAgICBvd25lcixcbiAgICAgIHVzZXJJZFxuICAgIH0sXG4gICAgdGVtcGxhdGVDYXJkU2VsZWN0b3IsXG4gICAgeyAvL2hhbmRsZXJzXG4gICAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgICBoYW5kbGVSZW1vdmVCdXR0b25DbGljayxcbiAgICAgIGhhbmRsZUxpa2VCdXR0b25DbGlja1xuICAgIH0pIHtcblxuICAgIC8vIGRhdGFcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9hbHQgPSBuYW1lO1xuICAgIHRoaXMuX2lkID0gX2lkO1xuICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XG4gICAgdGhpcy5fb3duZXJJZCA9IG93bmVyLl9pZDtcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG5cblxuICAgIC8vdGVtcGxhdGVcbiAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlQ2FyZFNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcbiAgICAvLyBsaXN0ZW5lciBoYW5kbGVyc1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVSZW1vdmVCdXR0b25DbGljayA9IGhhbmRsZVJlbW92ZUJ1dHRvbkNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b25DbGljayA9IGhhbmRsZUxpa2VCdXR0b25DbGljaztcblxuICB9XG5cbiAgcmVtb3ZlQ2FyZCAoKSB7XG4gICAgdGhpcy5fY2FyZC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkID0gbnVsbDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycyAoKSB7XG4gICAgdGhpcy5fY2FyZFJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlQnV0dG9uQ2xpY2sodGhpcylcbiAgICB9KTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNhcmRDbGljayk7XG5cbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHRoaXMuX2hhbmRsZUxpa2VCdXR0b25DbGljayh0aGlzKSk7XG4gIH1cblxuICBzZXRMaWtlcyAobGlrZXMpIHtcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcbiAgfVxuXG4gIGNyZWF0ZUNhcmRFbGVtZW50ICgpIHtcblxuICAgIC8vIGVtcHR5IGNhcmRcbiAgICAgIC8vIHRoaXMuX2NhcmQgPSB0aGlzLl9jYXJkVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuX2dldEVsZW1lbnQoKTtcbiAgICAvLyBjYXJkIGJ1dHRvbnNcbiAgICB0aGlzLl9jYXJkUmVtb3ZlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3JlbW92ZS1idG5cIik7XG4gICAgaWYgKHRoaXMuX293bmVySWQgPT0gdGhpcy5fdXNlcklkKVxuICAgICAgdGhpcy5fY2FyZFJlbW92ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fcmVtb3ZlLWJ0bl92aXNpYmxlXCIpO1xuXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XG5cbiAgICAvLyBjYXJkIGNvbnRlbnRcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRMaWtlc0NvdW50ID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VzLWNvdW50XCIpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX2FsdDtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzICgpO1xuXG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZDtcbiAgfVxuXG4gIF9nZXRFbGVtZW50ICgpIHtcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIF9yZW5kZXJMaWtlcyA9ICgpID0+IHtcbiAgICB0aGlzLl9jYXJkTGlrZXNDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcblxuICAgIGlmICh0aGlzLl9pc0xpa2VkKCkpIHtcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ0bl9hY3RpdmVcIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnRuX2FjdGl2ZVwiKVxuICAgIH1cbiAgfVxuXG4gIF9pc0xpa2VkKCkge1xuICAgLy8gcmV0dXJuIHRydWUgaWYgdXNlciBsaWtlZCB0aGUgY2FyZCwgb3RoZXJ3aXNlIGZhbHNlXG4gICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZShsaWtlID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQpXG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yICh7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJKb2JTZWxlY3RvciwgdXNlckF2YXRhclNlbGVjdG9yfSl7XG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VySm9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYlNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VyQXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgXCJ1c2VyTmFtZVwiOiB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBcInVzZXJKb2JcIjogdGhpcy5fdXNlckpvYkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBcInVzZXJBdmF0YXJcIjogdGhpcy5fdXNlckF2YXRhckVsZW1lbnQuc3JjXG4gICAgfVxuICB9XG5cbiAgZ2V0VXNlcklkICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlcklkO1xuICB9XG5cbiAgc2V0VXNlckluZm9UZXh0Q29udGVudCAoIHt1c2VyTmFtZSwgdXNlckpvYn0pIHtcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyTmFtZTtcbiAgICB0aGlzLl91c2VySm9iRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJKb2I7XG4gIH1cblxuXG4gIHNldFVzZXJJbmZvQXZhdGFyICggdXNlckF2YXRhclNyYykge1xuICAgIHRoaXMuX3VzZXJBdmF0YXJFbGVtZW50LnNyYyA9IHVzZXJBdmF0YXJTcmM7XG4gIH1cblxuICBpbml0VXNlckluZm8gKHsgdXNlck5hbWUsIHVzZXJKb2IsIHVzZXJBdmF0YXJTcmMsIHVzZXJJZCB9KSB7XG4gICAgdGhpcy5zZXRVc2VySW5mb1RleHRDb250ZW50ICgge3VzZXJOYW1lLCB1c2VySm9ifSk7XG4gICAgdGhpcy5zZXRVc2VySW5mb0F2YXRhciAodXNlckF2YXRhclNyYyk7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICB9XG59XG5cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IgKHtpdGVtcywgcmVuZGVyZXJ9LCBlbGVtZW50Q29udGFpbmVyU2VsZWN0b3IpICB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2VsZW1lbnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRDb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICBfY2xlYXJDb250YWluZXIoKSB7XG4gICAgdGhpcy5fZWxlbWVudENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoaXRlbXMpe1xuICAgIHRoaXMuX2NsZWFyQ29udGFpbmVyKCk7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcblxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2ggKCBpdGVtID0+IHtcbiAgICAgICAgdGhpcy5hZGRJdGVtKGl0ZW0pXG4gICAgfSlcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIGNvbnN0IGNhcmQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKVxuICAgIHRoaXMuX2VsZW1lbnRDb250YWluZXIucHJlcGVuZChjYXJkKTtcbiAgfVxufVxuIiwiY29uc3QgRVNDQVBFX0tFWV9DT0RFID0gMjc7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yIChwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XG4gICAgaWYgKGUud2hpY2ggPT09IEVTQ0FQRV9LRVlfQ09ERSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVPdmVybGF5UG9wdXBDb250ZW50ID0gKGUpID0+IHtcbiAgICBpZiAoZS5jdXJyZW50VGFyZ2V0ID09PSBlLnRhcmdldCkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIG9wZW4gKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlT3ZlcmxheVBvcHVwQ29udGVudCk7XG4gIH1cblxuICBjbG9zZSAoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVPdmVybGF5UG9wdXBDb250ZW50KTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzICgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idG4nKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KVxuICB9XG59XG4iLCJpbXBvcnQge1BvcHVwfSBmcm9tIFwiLi9Qb3B1cC5qc1wiXG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtdGl0bGVcIik7XG4gIH1cblxuICBvcGVuICh7dGV4dCwgc3JjLCBhbHR9KSB7XG5cbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IHNyY1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gYWx0O1xuICAgIHRoaXMuX3BvcHVwSW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IHRleHQ7XG5cbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yIChwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zYXZlLWJ0blwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcyAoKSAge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2ggKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KVxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzIChkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2ggICggKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSlcbiAgfVxuXG4gIHNldEJ1dHRvblRleHRDb250ZW50ICh0ZXh0KSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzICgpIHtcblxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKVxuICAgIH1cbiAgICAvLyAsIHsgb25jZTogdHJ1ZX0gIC8vIHVzZSBpdCBpZiBuZWVkIGRlbGV0ZSBhZnRlciBldmVudCBmaXJlIG9uY2UgYW5kIG5lZWQgc2V0IG5ldyBsaXN0ZW5lclxuICAgICk7XG4gIH1cblxuICBjbG9zZSAoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfVxuXG59XG4iLCJpbXBvcnQge1BvcHVwfSBmcm9tIFwiLi9Qb3B1cC5qc1wiXG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XG5cbiAgY29uc3RydWN0b3IgKHBvcHVwV2l0aFN1Ym1pdFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBXaXRoU3VibWl0U2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fc2F2ZS1idG5cIik7XG4gIH1cblxuICBzZXRBY3Rpb24oYWN0aW9uKSB7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gYWN0aW9uO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KClcbiAgICB9KTtcbiAgfVxuXG4gIHNldEJ1dHRvblRleHRDb250ZW50ICh0ZXh0KSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcbiAgfVxufVxuIiwiY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3NhdmUtYnRuXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc2F2ZS1idG5faW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X2ludmFsaWRcIixcbiAgZXJyb3JDbGFzczogXCJmb3JtX19lcnJvcl9hY3RpdmVcIlxufVxuXG5cbi8vIC0tIGJ1dHRvbnNcbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uU2VsZWN0b3IgPSBcIi5wcm9maWxlX19lZGl0LWJ0blwiO1xuY29uc3QgYWRkQ2FyZEJ1dHRvblNlbGVjdG9yID0gXCIucHJvZmlsZV9fYWRkLWNhcmQtYnRuXCI7XG5cblxuLy9wcm9maWxlXG4vLyAtLSBpbnB1dHNcbmNvbnN0IHByb2ZpbGVOYW1lU2VsZWN0b3IgPSBcIi5wcm9maWxlX19uYW1lXCI7XG5jb25zdCBwcm9maWxlSm9iU2VsZWN0b3IgPSBcIi5wcm9maWxlX19qb2JcIjtcbi8vIC0tIGF2YXRhciBpbWdcbmNvbnN0IHByb2ZpbGVBdmF0YXJTZWxlY3RvciA9IFwiLnByb2ZpbGVfX2F2YXRhclwiO1xuY29uc3QgcHJvZmlsZUF2YXRhckNvbnRhaW5lclNlbGVjdG9yID0gXCIucHJvZmlsZV9fYXZhdGFyLWNvbnRhaW5lclwiO1xuXG4vLyBjYXJkc1xuY29uc3QgY2FyZHNDb250YWluZXJTZWxlY3RvciA9IFwiLmNhcmRzX19jb250YWluZXJcIjtcbmNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gXCIuY2FyZC10ZW1wbGF0ZVwiO1xuXG4vLyBwb3B1cHNcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXBTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfcHJvZmlsZS1lZGl0XCI7XG5jb25zdCBhZGRDYXJkUG9wdXBTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIjtcbmNvbnN0IGltYWdlUG9wdXBTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfaW1hZ2VcIjtcbmNvbnN0IGRlbGV0ZUNhcmRQb3B1cFNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9kZWxldGUtY2FyZFwiO1xuY29uc3QgZWRpdFByb2ZpbGVBdmF0YXJTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfcHJvZmlsZS1hdmF0YXItZWRpdFwiO1xuXG5leHBvcnQge1xuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIGVkaXRQcm9maWxlQnV0dG9uU2VsZWN0b3IsXG4gIGFkZENhcmRCdXR0b25TZWxlY3RvcixcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcixcbiAgcHJvZmlsZUpvYlNlbGVjdG9yLFxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3IsXG4gIHByb2ZpbGVBdmF0YXJDb250YWluZXJTZWxlY3RvcixcbiAgY2FyZHNDb250YWluZXJTZWxlY3RvcixcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gIGVkaXRQcm9maWxlUG9wdXBTZWxlY3RvcixcbiAgYWRkQ2FyZFBvcHVwU2VsZWN0b3IsXG4gIGltYWdlUG9wdXBTZWxlY3RvcixcbiAgZGVsZXRlQ2FyZFBvcHVwU2VsZWN0b3IsXG4gIGVkaXRQcm9maWxlQXZhdGFyU2VsZWN0b3Jcbn1cbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yICh7YmFzZVVybCwgaGVhZGVyc30pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIF9jdXN0b21GZXRjaCAoZnVsbFVybCwgaGVhZGVycykge1xuICAgIHJldHVybiBmZXRjaCAoZnVsbFVybCwgaGVhZGVycylcbiAgICAgIC50aGVuKHJlcyA9PiByZXMub2sgPyByZXMuanNvbigpOiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzICsgXCIgXCIgKyByZXMuc3RhdHVzVGV4dCkpXG4gICAgICAvLyAuY2F0Y2goY29uc29sZS5sb2cpXG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoIChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoIChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICB9XG5cbiAgdXBkYXRlVXNlckluZm9UZXh0Q29udGVudChkYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoIChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgIH0pXG4gIH1cblxuICB1cGRhdGVVc2VySW5mb0F2YXRhcihkYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoIChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICB9KVxuICB9XG5cbiAgY3JlYXRlQ2FyZChkYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoIChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgfSlcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgLy8gY29uc29sZS5sb2coY2FyZElkKVxuICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaCAoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ0RFTEVURSdcbiAgICB9KVxuICB9XG5cbiAgbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoIChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUFVUJ1xuICAgIH0pXG4gIH1cblxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaCAoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogJ0RFTEVURSdcbiAgICB9KVxuICB9XG5cbn1cblxuIGV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjYxMzc3YjUxLTA1NjAtNGI3My1hNDA1LWFlY2MxZTA0NzhhNlwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gIH1cbn0pO1xuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7IC8vIGFkZCBpbXBvcnQgb2YgdGhlIG1haW4gc3R5bGVzaGVldHMgZmlsZVxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvcn0gICBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IHsgQ2FyZCB9ICAgICAgICAgICBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IHsgVXNlckluZm8gfSAgICAgICBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xuaW1wb3J0IHsgU2VjdGlvbiB9ICAgICAgICBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZSc7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcbmltcG9ydCB7IFBvcHVwV2l0aFN1Ym1pdCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3BvcHVwV2l0aFN1Ym1pdFwiO1xuaW1wb3J0IHsgdmFsaWRhdGlvblNldHRpbmdzLFxuICAgICAgICAgZWRpdFByb2ZpbGVCdXR0b25TZWxlY3RvcixcbiAgICAgICAgIGFkZENhcmRCdXR0b25TZWxlY3RvcixcbiAgICAgICAgIHByb2ZpbGVOYW1lU2VsZWN0b3IsXG4gICAgICAgICBwcm9maWxlSm9iU2VsZWN0b3IsXG4gICAgICAgICBwcm9maWxlQXZhdGFyU2VsZWN0b3IsXG4gICAgICAgICBwcm9maWxlQXZhdGFyQ29udGFpbmVyU2VsZWN0b3IsXG4gICAgICAgICBjYXJkc0NvbnRhaW5lclNlbGVjdG9yLFxuICAgICAgICAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gICAgICAgICBlZGl0UHJvZmlsZVBvcHVwU2VsZWN0b3IsXG4gICAgICAgICBhZGRDYXJkUG9wdXBTZWxlY3RvcixcbiAgICAgICAgIGltYWdlUG9wdXBTZWxlY3RvcixcbiAgICAgICAgIGRlbGV0ZUNhcmRQb3B1cFNlbGVjdG9yLFxuICAgICAgICAgZWRpdFByb2ZpbGVBdmF0YXJTZWxlY3RvciAgfSAgZnJvbSAnLi4vdXRpbHMvc2V0dGluZ3MuanMnO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5cblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKVxuICAudGhlbigoW2NhcmRJbml0bERhdGEsIHVzZXJJbmZvXSkgPT4ge1xuICAgIHVzZXJQcm9maWxlLmluaXRVc2VySW5mbyh7XG4gICAgICB1c2VyTmFtZTogdXNlckluZm8ubmFtZSxcbiAgICAgIHVzZXJKb2I6IHVzZXJJbmZvLmFib3V0LFxuICAgICAgdXNlckF2YXRhclNyYzogdXNlckluZm8uYXZhdGFyLFxuICAgICAgdXNlcklkOiB1c2VySW5mby5faWQsXG4gICAgfSlcblxuICAgIGNhcmRJbml0bERhdGEuZm9yRWFjaCAoIGNhcmQgPT4ge1xuICAgICAgY2FyZC51c2VySWQgPSB1c2VySW5mby5faWQ7XG4gICAgfSlcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhjYXJkSW5pdGxEYXRhKTtcbn0pXG4uY2F0Y2ggKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuXG5cbi8vcGFnZVxuLy8tLSBidXR0b25zXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWRpdFByb2ZpbGVCdXR0b25TZWxlY3Rvcik7XG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhZGRDYXJkQnV0dG9uU2VsZWN0b3IpO1xuXG4vLy0tIHByb2ZpbGVcbi8vYXZhdGFyXG5jb25zdCBwcm9maWxlQXZhdGFyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlQXZhdGFyQ29udGFpbmVyU2VsZWN0b3IpO1xuXG4vL3BvcHVwc1xuLy8tLSBwb3B1cHNcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVkaXRQcm9maWxlUG9wdXBTZWxlY3Rvcik7XG5jb25zdCBhZGRDYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFkZENhcmRQb3B1cFNlbGVjdG9yKTtcbmNvbnN0IGVkaXRQcm9maWxlQXZhdGFyUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVkaXRQcm9maWxlQXZhdGFyU2VsZWN0b3IpO1xuLy8tLSBmb3JtcyBuYW1lc1xuY29uc3QgZWRpdFByb2ZpbGVGb3JtTmFtZSA9IGVkaXRQcm9maWxlUG9wdXBcbiAgLnF1ZXJ5U2VsZWN0b3IodmFsaWRhdGlvblNldHRpbmdzLmZvcm1TZWxlY3RvcilcbiAgLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuY29uc3QgYWRkQ2FyZEZvcm1OYW1lID0gYWRkQ2FyZFBvcHVwXG4gIC5xdWVyeVNlbGVjdG9yKHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtU2VsZWN0b3IpXG4gIC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbmNvbnN0IGVkaXRQcm9maWxlQXZhdGFyRm9ybU5hbWUgPSBlZGl0UHJvZmlsZUF2YXRhclBvcHVwXG4ucXVlcnlTZWxlY3Rvcih2YWxpZGF0aW9uU2V0dGluZ3MuZm9ybVNlbGVjdG9yKVxuLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuXG4vLy0tLS0tLS0gaW5pdCAtLS0tLS1cblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuLy8gZW5hYmxlIGxpc3Qgb2YgdmFsaWRhdG9yc1xuY29uc3QgZW5hYmxlRm9ybXNWYWxpZGF0aW9uID0gKHNldHRpbmdzKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmZvcm1TZWxlY3RvcikpXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KTtcbiAgICAvLyBnZXQgdGhlIG5hbWUgb2YgdGhlIGZvcm1cbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgIC8vIHN0b3JlIGEgdmFsaWRhdG9yIGJ5IHRoZSBgbmFtZWAgb2YgdGhlIGZvcm1cbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG4vLyBlbmFibGUgdmFsaWRhdGlvblxuZW5hYmxlRm9ybXNWYWxpZGF0aW9uKHZhbGlkYXRpb25TZXR0aW5ncyk7XG5cbi8vcHJvZmlsZVxuY29uc3QgdXNlclByb2ZpbGUgPSBuZXcgVXNlckluZm8gKHtcbiAgdXNlck5hbWVTZWxlY3RvcjogcHJvZmlsZU5hbWVTZWxlY3RvcixcbiAgdXNlckpvYlNlbGVjdG9yOiAgcHJvZmlsZUpvYlNlbGVjdG9yLFxuICB1c2VyQXZhdGFyU2VsZWN0b3I6IHByb2ZpbGVBdmF0YXJTZWxlY3Rvcixcbn0pO1xuXG5cbi8vIGNhcmQgbGlzdFxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gIGl0ZW1zOiBbXSxcbiAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgIHJldHVybiBnZXROZXdDYXJkSW5zdGFuY2UgKGNhcmREYXRhKS5jcmVhdGVDYXJkRWxlbWVudCgpXG4gIH1cbn0sIGNhcmRzQ29udGFpbmVyU2VsZWN0b3IpO1xuXG4vLy0tIHBvcHVwIGluc3RhbmNlc1xuY29uc3QgaW1hZ2VQb3B1cEluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEltYWdlIChpbWFnZVBvcHVwU2VsZWN0b3IpO1xuXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoRm9ybSAoZWRpdFByb2ZpbGVQb3B1cFNlbGVjdG9yLCAoZGF0YSkgPT4ge1xuICBlZGl0UHJvZmlsZVBvcHVwSW5zdGFuY2Uuc2V0QnV0dG9uVGV4dENvbnRlbnQoXCJTYXZpbmcuLi5cIik7XG4gIGFwaS51cGRhdGVVc2VySW5mb1RleHRDb250ZW50KHtcbiAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgYWJvdXQ6IGRhdGEuam9iLFxuICB9KVxuICAudGhlbiAoIHJlcyA9PiB7XG4gICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm9UZXh0Q29udGVudCh7XG4gICAgICAndXNlck5hbWUnOiByZXMubmFtZSxcbiAgICAgICd1c2VySm9iJzogIHJlcy5hYm91dCxcbiAgICB9KVxuICAgIGVkaXRQcm9maWxlUG9wdXBJbnN0YW5jZS5jbG9zZSgpO1xuICB9KVxuICAuY2F0Y2ggKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAuZmluYWxseSAoICgpID0+IHtcbiAgICBlZGl0UHJvZmlsZVBvcHVwSW5zdGFuY2Uuc2V0QnV0dG9uVGV4dENvbnRlbnQoXCJTYXZlXCIpO1xuICB9KVxufSk7XG5cbmNvbnN0IGRlbGV0ZUNhcmRQb3B1cEluc3RhbmNlID0gbmV3IFBvcHVwV2l0aFN1Ym1pdCAoZGVsZXRlQ2FyZFBvcHVwU2VsZWN0b3IpO1xuXG5jb25zdCBhZGRDYXJkUG9wdXBJbnN0YW5jZSA9IG5ldyBQb3B1cFdpdGhGb3JtIChhZGRDYXJkUG9wdXBTZWxlY3RvciwgKGRhdGEpID0+IHtcbiAgLy8gY29uc29sZS5sb2coZGF0YSlcbiAgYWRkQ2FyZFBvcHVwSW5zdGFuY2Uuc2V0QnV0dG9uVGV4dENvbnRlbnQoXCJDcmVhdGluZy4uLlwiKTtcbiAgYXBpLmNyZWF0ZUNhcmQoe1xuICAgIG5hbWU6IGRhdGEuY2FyZFRpdGxlLFxuICAgIGxpbms6IGRhdGEudXJsXG4gIH0pXG4gICAgLnRoZW4oIHJlcyA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0NhcmREYXRhID0ge1xuICAgICAgICAgIG5hbWU6IHJlcy5uYW1lLFxuICAgICAgICAgIGxpbms6IHJlcy5saW5rLFxuICAgICAgICAgIGFsdDogcmVzLm5hbWUsXG4gICAgICAgICAgX2lkOiByZXMuX2lkLFxuICAgICAgICAgIGFibGVUb0RlbGV0ZTogdHJ1ZSxcbiAgICAgICAgICBsaWtlczogW10sXG4gICAgICAgICAgb3duZXI6IHtfaWQ6dXNlclByb2ZpbGUuZ2V0VXNlcklkKCl9LFxuICAgICAgICAgIHVzZXJJZDogdXNlclByb2ZpbGUuZ2V0VXNlcklkKClcbiAgICAgICAgfVxuICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKG5ld0NhcmREYXRhKVxuICAgICAgICBhZGRDYXJkUG9wdXBJbnN0YW5jZS5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoIChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAuZmluYWxseSAoICgpID0+IHtcbiAgICAgIGFkZENhcmRQb3B1cEluc3RhbmNlLnNldEJ1dHRvblRleHRDb250ZW50KFwiQ3JlYXRlXCIpO1xuICAgIH0pXG59KVxuXG5jb25zdCBlZGl0UHJvZmlsZUF2YXRhckluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEZvcm0gKGVkaXRQcm9maWxlQXZhdGFyU2VsZWN0b3IsIChkYXRhKSA9PiB7XG4gIGVkaXRQcm9maWxlQXZhdGFySW5zdGFuY2Uuc2V0QnV0dG9uVGV4dENvbnRlbnQoXCJTYXZpbmcuLi5cIik7XG4gIGFwaS51cGRhdGVVc2VySW5mb0F2YXRhcih7XG4gICAgYXZhdGFyOiBkYXRhLnVybCxcbiAgfSlcbiAgLnRoZW4gKCByZXMgPT4ge1xuICAgIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvQXZhdGFyKCAgcmVzLmF2YXRhcilcbiAgICBlZGl0UHJvZmlsZUF2YXRhckluc3RhbmNlLmNsb3NlKCk7XG4gIH0pXG4gIC5jYXRjaCAoZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gIC5maW5hbGx5ICggKCkgPT4ge1xuICAgIGVkaXRQcm9maWxlQXZhdGFySW5zdGFuY2Uuc2V0QnV0dG9uVGV4dENvbnRlbnQoXCJTYXZlXCIpO1xuICB9KVxufSk7XG5cbi8vIGFsbCBsaXN0ZW5lcnNcblxuZWRpdFByb2ZpbGVQb3B1cEluc3RhbmNlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5pbWFnZVBvcHVwSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZENhcmRQb3B1cEluc3RhbmNlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5kZWxldGVDYXJkUG9wdXBJbnN0YW5jZS5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdFByb2ZpbGVBdmF0YXJJbnN0YW5jZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAvLyBpbml0IGVkaXRQcm9maWxlIGZvcm1cbiAgaW5pdEVkaXRQcm9maWxlRm9ybSgpO1xuICAvLyByZXNldCB2YWxpZGF0aW9uXG4gIGZvcm1WYWxpZGF0b3JzW2VkaXRQcm9maWxlRm9ybU5hbWVdLnJlc2V0VmFsaWRhdGlvbigpO1xuICAvLyBzaG93IHBvcHVwIHdpdGggZm9ybVxuICBlZGl0UHJvZmlsZVBvcHVwSW5zdGFuY2Uub3BlbigpO1xufSk7XG5cbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgLy8gaW5pdCBhZGQtY2FyZCBmb3JtXG4gIC8vIGVtcHR5XG4gIC8vIHJlc2V0IHZhbGlkYXRpb25cbiAgZm9ybVZhbGlkYXRvcnNbYWRkQ2FyZEZvcm1OYW1lXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgLy8gc2hvdyBwb3B1cCB3aXRoIGZvcm1cbiAgYWRkQ2FyZFBvcHVwSW5zdGFuY2Uub3BlbigpXG59KTtcblxucHJvZmlsZUF2YXRhckNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyIChcImNsaWNrXCIsICgpID0+IHtcbiAgLy8gaW5pdCBwcm9maWxlLWF2YXRhci1lZGl0IGZvcm1cbiAgY29uc3QgaW5mbyA9IHVzZXJQcm9maWxlLmdldFVzZXJJbmZvKCk7XG4gIGVkaXRQcm9maWxlQXZhdGFySW5zdGFuY2Uuc2V0SW5wdXRWYWx1ZXMgKHtcbiAgICAndXJsJzogaW5mby51c2VyQXZhdGFyXG4gIH0pXG4gIC8vIHJlc2V0IHZhbGlkYXRpb25cbiAgZm9ybVZhbGlkYXRvcnNbZWRpdFByb2ZpbGVBdmF0YXJGb3JtTmFtZV0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIC8vIHNob3cgcG9wdXAgd2l0aCBmb3JtXG4gIGVkaXRQcm9maWxlQXZhdGFySW5zdGFuY2Uub3BlbigpO1xufSlcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5mdW5jdGlvbiBpbml0RWRpdFByb2ZpbGVGb3JtKCkge1xuICBjb25zdCBpbmZvID0gdXNlclByb2ZpbGUuZ2V0VXNlckluZm8oKTtcbiAgZWRpdFByb2ZpbGVQb3B1cEluc3RhbmNlLnNldElucHV0VmFsdWVzICh7XG4gICAgJ25hbWUnOiBpbmZvLnVzZXJOYW1lLFxuICAgICdqb2InOiBpbmZvLnVzZXJKb2IsXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGhhbmRsZVJlbW92ZUJ1dHRvbkNsaWNrIChpbnN0YW5jZSkgIHtcbiAgLy8gb3BlbiBwb3B1cCBhbmQgd2FpdCBmb3IgY29uZmlybWF0aW9uXG4gIGRlbGV0ZUNhcmRQb3B1cEluc3RhbmNlLm9wZW4oKTtcbiAgLy8gaWYgY29uZmlybWVkICAtIGRlbGV0ZSBmcm9tIHNlcnZlclxuICBkZWxldGVDYXJkUG9wdXBJbnN0YW5jZS5zZXRBY3Rpb24oKCkgPT4ge1xuICAgIGRlbGV0ZUNhcmRQb3B1cEluc3RhbmNlLnNldEJ1dHRvblRleHRDb250ZW50KFwiRGVsZXRpbmcuLi5cIik7XG4gICAgYXBpLmRlbGV0ZUNhcmQoaW5zdGFuY2UuX2lkKVxuICAgIC50aGVuICggcmVzID0+IHtcbiAgICAgIGRlbGV0ZUNhcmRQb3B1cEluc3RhbmNlLmNsb3NlKCk7XG4gICAgICBpbnN0YW5jZS5yZW1vdmVDYXJkKCk7XG4gICAgfSlcbiAgICAuY2F0Y2ggKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgIC5maW5hbGx5ICggKCkgPT4ge1xuICAgICAgZGVsZXRlQ2FyZFBvcHVwSW5zdGFuY2Uuc2V0QnV0dG9uVGV4dENvbnRlbnQoXCJZZXNcIik7XG4gICAgfSlcbiAgfSlcbn1cblxuLy8gZ2V0IG5ldyBjYXJkIGluc3RhbmNlXG5mdW5jdGlvbiBnZXROZXdDYXJkSW5zdGFuY2UgKGRhdGEpIHtcblxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgZGF0YSxcbiAgICBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgICB7XG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcbiAgICAgIGltYWdlUG9wdXBJbnN0YW5jZS5vcGVuKHtcbiAgICAgICAgJ3RleHQnOiBkYXRhLm5hbWUsXG4gICAgICAgICdzcmMnOiBkYXRhLmxpbmssXG4gICAgICAgICdhbHQnOiBkYXRhLmFsdCxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlUmVtb3ZlQnV0dG9uQ2xpY2ssXG4gICAgICBoYW5kbGVMaWtlQnV0dG9uQ2xpY2s6IChpbnN0YW5jZSkgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpb24gPSBpbnN0YW5jZS5faXNMaWtlZCgpID8gJ3VubGlrZUNhcmQnOiAnbGlrZUNhcmQnO1xuICAgICAgICBhcGlbYWN0aW9uXShpbnN0YW5jZS5faWQpXG4gICAgICAgICAgLnRoZW4gKCByZXMgPT5cbiAgICAgICAgICAgIGluc3RhbmNlLnNldExpa2VzKHJlcy5saWtlcylcbiAgICAgICAgKVxuICAgICAgICAuY2F0Y2ggKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgICAgfVxuICAgIH1cbiAgKVxuICByZXR1cm4gY2FyZDtcbn1cblxuXG4iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJidXR0b24iLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0cyIsImNsYXNzTGlzdCIsImFkZCIsIl9zZXR0aW5ncyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsInJlbW92ZSIsImlucHV0cyIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUVycm9yIiwiX3Nob3dFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JFbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwidGV4dENvbnRlbnQiLCJlcnJvckNsYXNzIiwiZm9yRWFjaCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9zYXZlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInRoaXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiQ2FyZCIsInRlbXBsYXRlQ2FyZFNlbGVjdG9yIiwibmFtZSIsImxpbmsiLCJfaWQiLCJsaWtlcyIsIm93bmVyIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlUmVtb3ZlQnV0dG9uQ2xpY2siLCJoYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJfY2FyZExpa2VzQ291bnQiLCJfbGlrZXMiLCJsZW5ndGgiLCJfaXNMaWtlZCIsIl9jYXJkTGlrZUJ1dHRvbiIsIl9uYW1lIiwiX2xpbmsiLCJfYWx0IiwiX293bmVySWQiLCJfdXNlcklkIiwiX2NhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlUmVtb3ZlQnV0dG9uQ2xpY2siLCJfaGFuZGxlTGlrZUJ1dHRvbkNsaWNrIiwiX2NhcmQiLCJfY2FyZFJlbW92ZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJlIiwiX3JlbmRlckxpa2VzIiwiX2dldEVsZW1lbnQiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY2xvbmVOb2RlIiwibGlrZSIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJKb2JTZWxlY3RvciIsInVzZXJBdmF0YXJTZWxlY3RvciIsIl91c2VyTmFtZUVsZW1lbnQiLCJfdXNlckpvYkVsZW1lbnQiLCJfdXNlckF2YXRhckVsZW1lbnQiLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJ1c2VyQXZhdGFyU3JjIiwic2V0VXNlckluZm9UZXh0Q29udGVudCIsInNldFVzZXJJbmZvQXZhdGFyIiwiU2VjdGlvbiIsImVsZW1lbnRDb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfZWxlbWVudENvbnRhaW5lciIsImlubmVySFRNTCIsIl9jbGVhckNvbnRhaW5lciIsIml0ZW0iLCJhZGRJdGVtIiwiY2FyZCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJ3aGljaCIsImNsb3NlIiwiY3VycmVudFRhcmdldCIsInRhcmdldCIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheVBvcHVwQ29udGVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltYWdlIiwiX3BvcHVwSW1hZ2VUaXRsZSIsInRleHQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwiX3N1Ym1pdEJ1dHRvbiIsImlucHV0VmFsdWVzIiwidmFsdWUiLCJkYXRhIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhTdWJtaXQiLCJwb3B1cFdpdGhTdWJtaXRTZWxlY3RvciIsImFjdGlvbiIsInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImVkaXRQcm9maWxlUG9wdXBTZWxlY3RvciIsImFkZENhcmRQb3B1cFNlbGVjdG9yIiwiZWRpdFByb2ZpbGVBdmF0YXJTZWxlY3RvciIsImFwaSIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImZ1bGxVcmwiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIl9jdXN0b21GZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiY2FyZEluaXRsRGF0YSIsInVzZXJJbmZvIiwidXNlclByb2ZpbGUiLCJpbml0VXNlckluZm8iLCJhYm91dCIsImF2YXRhciIsImNhcmRMaXN0IiwicmVuZGVySXRlbXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImFkZENhcmRCdXR0b24iLCJwcm9maWxlQXZhdGFyQ29udGFpbmVyIiwiZWRpdFByb2ZpbGVQb3B1cCIsImFkZENhcmRQb3B1cCIsImVkaXRQcm9maWxlQXZhdGFyUG9wdXAiLCJlZGl0UHJvZmlsZUZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiYWRkQ2FyZEZvcm1OYW1lIiwiZWRpdFByb2ZpbGVBdmF0YXJGb3JtTmFtZSIsImZvcm1WYWxpZGF0b3JzIiwiQXJyYXkiLCJmcm9tIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJlbmFibGVWYWxpZGF0aW9uIiwiY2FyZERhdGEiLCJpbWFnZVBvcHVwSW5zdGFuY2UiLCJvcGVuIiwiaW5zdGFuY2UiLCJzZXRMaWtlcyIsImNyZWF0ZUNhcmRFbGVtZW50IiwiZWRpdFByb2ZpbGVQb3B1cEluc3RhbmNlIiwic2V0QnV0dG9uVGV4dENvbnRlbnQiLCJ1cGRhdGVVc2VySW5mb1RleHRDb250ZW50Iiwiam9iIiwiZmluYWxseSIsImRlbGV0ZUNhcmRQb3B1cEluc3RhbmNlIiwiYWRkQ2FyZFBvcHVwSW5zdGFuY2UiLCJjcmVhdGVDYXJkIiwiY2FyZFRpdGxlIiwidXJsIiwibmV3Q2FyZERhdGEiLCJhYmxlVG9EZWxldGUiLCJnZXRVc2VySWQiLCJlZGl0UHJvZmlsZUF2YXRhckluc3RhbmNlIiwidXBkYXRlVXNlckluZm9BdmF0YXIiLCJzZXRBY3Rpb24iLCJkZWxldGVDYXJkIiwicmVtb3ZlQ2FyZCIsInNldEV2ZW50TGlzdGVuZXJzIiwiaW5mbyIsInNldElucHV0VmFsdWVzIiwicmVzZXRWYWxpZGF0aW9uIiwidXNlckF2YXRhciJdLCJzb3VyY2VSb290IjoiIn0=